{"version":3,"sources":["uni-app:///main.js","webpack:///D:/website/finished/shipindianbo/shipindianbo/pages/detail-video/detail-video.vue?6d42","webpack:///D:/website/finished/shipindianbo/shipindianbo/pages/detail-video/detail-video.vue?0b7c","webpack:///D:/website/finished/shipindianbo/shipindianbo/pages/detail-video/detail-video.vue?e669","webpack:///D:/website/finished/shipindianbo/shipindianbo/pages/detail-video/detail-video.vue?c7b9","uni-app:///pages/detail-video/detail-video.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/detail-video/detail-video.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/detail-video/detail-video.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail-video.vue?vue&type=template&id=7f168334&\"\nvar renderjs\nimport script from \"./detail-video.vue?vue&type=script&lang=js&\"\nexport * from \"./detail-video.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/detail-video/detail-video.vue\"\nexport default component.exports","export * from \"-!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-video.vue?vue&type=template&id=7f168334&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = !(_vm.tabIndex === 0)\n    ? _vm.__map(_vm.comments, function(item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var f0 = _vm._f(\"formatTime\")(item.created_time)\n\n        return {\n          $orig: $orig,\n          f0: f0\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Program/HBuilderX.2.7.14.20200618.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail-video.vue?vue&type=script&lang=js&\"","<template>\n\t<view style=\"line-height: 1;overflow-y:hidden;\">\r\n\t\t<!-- 视频 -->\r\n\t\t<!-- #ifndef APP-PLUS -->\r\n\t\t<video :src=\"src\" :poster=\"poster\" style=\"height: 225px;width:100%;\" id=\"myVideo\" controls></video>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- scrollview -->\r\n\t\t<scroll-view scroll-y=\"true\" :style=\"'height:'+scrollH+'px;'\">\r\n\t\t\t<!-- 选项卡头部 -->\r\n\t\t\t<view class=\"border-bottom border-light-secondary bg-white flex align-stretch position-fixed left-0 right-0\" style=\"height:80rpx;z-index:100;\">\r\n\t\t\t\t<view class=\"flex-1 flex align-center justify-center\"\r\n\t\t\t\tv-for=\"(item,index) in tabBars\" :key=\"index\"\r\n\t\t\t\t@click=\"changeTab(index)\">\r\n\t\t\t\t\t<text class=\"font py-1\"\r\n\t\t\t\t\t:class=\"tabIndex === index ?'text-main border-main':''\"\r\n\t\t\t\t\t:style=\"tabIndex === index ?'border-bottom: 5rpx solid;':''\">{{item.name}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\" style=\"height: 80rpx;\"></view>\r\n\t\t\t<!-- 选项卡内容 -->\r\n\t\t\t<!-- 简介 -->\r\n\t\t\t<view v-if=\"tabIndex === 0\" class=\"animate__animated animate__fadeIn animate__fast\">\r\n\t\t\t\t<!-- 头像昵称 -->\r\n\t\t\t\t<view class=\"px-3 py-2 flex align-center\">\r\n\t\t\t\t\t<image :src=\"detail.user.avatar || '/static/demo/6.jpg'\" mode=\"\" style=\"width: 80rpx;height: 80rpx;\" class=\"mr-3 rounded-circle\"\r\n\t\t\t\t\t@click=\"openUserSpace\"></image>\r\n\t\t\t\t\t<view class=\"flex flex-column\">\r\n\t\t\t\t\t\t<text class=\"text-main font-md\">{{detail.user.nickname|| detail.user.username}}</text>\r\n\t\t\t\t\t\t<text class=\"font-sm text-muted\" style=\"line-height: 1;\">{{fensCount}} 粉丝</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 关注按钮 -->\r\n\t\t\t\t\t<view class=\"flex align-center justify-center rounded bg-main text-white py-1 px-2 ml-auto\" hover-class=\"bg-main-hover\"\r\n\t\t\t\t\t@click=\"doFollow\" v-if=\" detail.user.id !== user_id \">\r\n\t\t\t\t\t\t<text class=\"font\">{{followStatus ? '已关注':'关注'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 视频标题 -->\r\n\t\t\t\t<view class=\"font-md px-3\">\r\n\t\t\t\t\t{{detail.title}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 视频描述 -->\r\n\t\t\t\t<view class=\"flex align-center justify-between text-muted px-3\">\r\n\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t<text class=\"iconfont iconbofangshu font-md mr-1\"></text>\r\n\t\t\t\t\t\t<text class=\"font-sm\">{{detail.play_count}}</text>\r\n\t\t\t\t\t\t<text class=\"iconfont icondanmushu font-md mx-1\"></text>\r\n\t\t\t\t\t\t<text class=\"font-sm\">{{detail.danmu_count}}</text>\r\n\t\t\t\t\t\t<text class=\"font-sm ml-1\">{{detail.created_time }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 收藏按钮 -->\r\n\t\t\t\t\t<view class=\"flex align-center justify-center rounded bg-main text-white py-1 px-2 ml-auto\" hover-class=\"bg-main-hover\"\r\n\t\t\t\t\t@click=\"doFava\">\r\n\t\t\t\t\t\t<text class=\"font-sm\">{{favaStatus ? '已收藏':'收藏'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 滚动选集 -->\r\n\t\t\t\t<view class=\"py-3 border-top border-bottom border-light-secondary\">\r\n\t\t\t\t\t<!-- 选集标题 -->\r\n\t\t\t\t\t<view class=\"flex align-center px-3\">\r\n\t\t\t\t\t\t<text class=\"font-md\">选集</text>\r\n\t\t\t\t\t\t<view class=\"flex align-center text-muted ml-auto\"\r\n\t\t\t\t\t\t@click=\"openPopup\">\r\n\t\t\t\t\t\t\t共{{videos.length}}集\r\n\t\t\t\t\t\t\t<text class=\"iconfont iconjinru ml-1\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 选集内容 -->\r\n\t\t\t\t\t<scroll-view scroll-x=\"true\" class=\"scroll-row mt-2\" style=\"height:200rpx;\">\r\n\t\t\t\t\t\t<view v-for=\"(item,index) in videos\" :key=\"index\" class=\"scroll-row-item rounded border ml-2 p-2 \" style=\"width: 340rpx;\"\r\n\t\t\t\t\t\t:class=\"activeIndex === index ? 'text-main border-main':'text-muted border-light-secondary'\"\r\n\t\t\t\t\t\t@click=\"changeVideo(item,index)\">\r\n\t\t\t\t\t\t\t<text class=\"font\">第 {{index+1}} 集</text>\r\n\t\t\t\t\t\t\t<view class=\"font-md text-ellipsis\">\r\n\t\t\t\t\t\t\t\t{{item.title}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 热门 -->\r\n\t\t\t\t<view class=\"f-list\">\r\n\t\t\t\t\t<media-list v-for=\"(item,index) in hot\" :key=\"index\" :item=\"item\" :index=\"index\"></media-list>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 评论 -->\r\n\t\t\t<view v-else class=\"animate__animated animate__fadeIn animate__fast px-3 py-1\">\r\n\t\t\t\t<view class=\"uni-comment-list\"\r\n\t\t\t\tv-for=\"(item,index) in comments\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"uni-comment-face\">\r\n\t\t\t\t\t\t<image :src=\"item.send_user.avatar || '/static/demo/6.jpg'\" mode=\"\" style=\"width: 80rpx;height: 80rpx;\" class=\"rounded-circle\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"uni-comment-body\">\r\n\t\t\t\t\t\t<view class=\"uni-comment-top\">\r\n\t\t\t\t\t\t\t<text class=\"text-main font\">{{item.send_user.nickname || item.send_user.username}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"uni-comment-date\">\r\n\t\t\t\t\t\t\t<text class=\"text-muted font-sm\">{{item.created_time | formatTime}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"uni-comment-content\"\r\n\t\t\t\t\t\t@click=\"openComment(item.id,item.send_user)\">\r\n\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 回复内容 -->\r\n\t\t\t\t\t\t<view class=\"flex flex-wrap p-2 bg-light rounded\"\r\n\t\t\t\t\t\tv-for=\"(item2,index2) in item.comments\" :key=\"index2\">\r\n\t\t\t\t\t\t\t<text class=\"font text-main\">{{item2.send_user.nickname || item2.send_user.username}}</text>\r\n\t\t\t\t\t\t\t<text class=\"font text-dark\">回复</text>\r\n\t\t\t\t\t\t\t<text class=\"font text-main pr-1\">{{item2.reply_user.nickname || item2.reply_user.username}}:</text>\r\n\t\t\t\t\t\t\t<text @click=\"openComment(item.id,item2.send_user)\">{{item2.content}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 右下角+号 -->\r\n\t\t\t\t<view class=\"position-fixed flex align-center justify-center bg-main rounded-circle animate__animated animate__fast\" hover-class=\"bg-main-hover animate__pulse\" style=\"width: 120rpx;height: 120rpx;right: 50rpx;bottom: 50rpx;\"\r\n\t\t\t\t@click=\"openComment(0)\">\r\n\t\t\t\t\t<text class=\"text-white iconfont iconjia\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<!-- 选集弹出框 -->\r\n\t\t<f-popup ref=\"popup\">\r\n\t\t\t<view class=\"position-absolute bottom-0 left-0 right-0 bg-white animate__animated animate__faster animate__fadeIn\"\r\n\t\t\t@click.stop=\"stop\">\r\n\t\t\t\t<view style=\"height: 600rpx;\">\r\n\t\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t\t<text class=\"font-md ml-3\">选集</text>\r\n\t\t\t\t\t\t<view class=\"flex align-center justify-center ml-auto\" style=\"width: 80rpx;height: 80rpx;\" hover-class=\"bg-light\"\r\n\t\t\t\t\t\t@click=\"hidePopup\">\r\n\t\t\t\t\t\t\t<text class=\"iconfont iconguanbi text-muted\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 选集列表 -->\r\n\t\t\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 520rpx;\">\r\n\t\t\t\t\t\t<view class=\"flex flex-wrap\">\r\n\t\t\t\t\t\t\t<view style=\"width: 50%;box-sizing: border-box;\" class=\"p-2\" \r\n\t\t\t\t\t\t\tv-for=\"(item,index) in videos\" :key=\"index\" >\r\n\t\t\t\t\t\t\t\t<view class=\"rounded border p-2 \"\r\n\t\t\t\t\t\t\t\t:class=\"activeIndex === index ? 'text-main border-main':'text-muted border-light-secondary'\"\r\n\t\t\t\t\t\t\t\t@click=\"changeVideo(item,index)\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"font\">第 {{index+1}} 集</text>\r\n\t\t\t\t\t\t\t\t\t<view class=\"font-md text-ellipsis\">\r\n\t\t\t\t\t\t\t\t\t\t{{item.title}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</f-popup>   \r\n\t\t<!-- 评论弹出框 -->\r\n\t\t<f-popup ref=\"comment\">\r\n\t\t\t<view class=\"position-absolute bottom-0 left-0 right-0 bg-white animate__animated animate__faster animate__fadeIn\"\r\n\t\t\t@click.stop=\"stop\">\r\n\t\t\t\t<view class=\"flex align-center px-3\" style=\"height: 100rpx;\">\r\n\t\t\t\t\t<input type=\"text\" v-model=\"content\" :placeholder=\"reply_user.id ? '回复@'+reply_user.name:'说一句话吧'\" class=\"bg-light rounded mr-3 px-2 flex-1\" style=\"height: 60rpx;\" />\r\n\t\t\t\t\t<!-- 回复按钮 -->\r\n\t\t\t\t\t<view class=\"flex align-center justify-center rounded bg-main text-white py-1 px-2 ml-auto\" hover-class=\"bg-main-hover\"\r\n\t\t\t\t\t@click=\"sendComment\">\r\n\t\t\t\t\t\t<text class=\"font\">发送</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</f-popup>\n\t</view>\n</template>\n\n<script>\r\n\timport mediaList from '@/components/common/media-list.vue';\r\n\timport fPopup from '@/components/common/f-popup.vue';\r\n\timport $T from '@/common/time.js';\r\n\timport {mapState } from 'vuex';\r\n\tlet videoCTX = null;\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\tmediaList,\r\n\t\t\tfPopup\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tid:0,\r\n\t\t\t\thot:[],\r\n\t\t\t\tcomments:[],\r\n\t\t\t\tcontent:\"\",\r\n\t\t\t\treply_id:0,\r\n\t\t\t\treply_user:{\r\n\t\t\t\t\tid:0,\r\n\t\t\t\t\tname:\"\",\r\n\t\t\t\t},\r\n\t\t\t\tfensCount:0,\r\n\t\t\t\tsrc:\"\",\r\n\t\t\t\tposter:\"\",\n\t\t\t\tdetail:{\r\n\t\t\t\t\tcategory_id: 0,\r\n\t\t\t\t\tcover: \"\",\r\n\t\t\t\t\tcreated_time: \"\",\r\n\t\t\t\t\tdanmu_count: 0,\r\n\t\t\t\t\tdesc: \"\",\r\n\t\t\t\t\tduration: 0,\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tplay_count: 0,\r\n\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\tuser: {\r\n\t\t\t\t\t\tid: 0, \r\n\t\t\t\t\t\tusername: \"\", \r\n\t\t\t\t\t\tnickname: \"\", \r\n\t\t\t\t\t\tavatar: \"\",\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tactiveIndex:0,\r\n\t\t\t\tvideos:[],\r\n\t\t\t\tscrollH:500,\r\n\t\t\t\ttabIndex:0,\r\n\t\t\t\ttabBars:[{\r\n\t\t\t\t\tname:\"简介\"\r\n\t\t\t\t},{\r\n\t\t\t\t\tname:\"评论\"\r\n\t\t\t\t}],\r\n\t\t\t\tfollowStatus:false,\r\n\t\t\t\tfavaStatus:false,\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e){\r\n\t\t\tlet res = uni.getSystemInfoSync();\r\n\t\t\tthis.scrollH = res.windowHeight - 226;\r\n\t\t\tif(!e.id){\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:'非法参数'\r\n\t\t\t\t});\r\n\t\t\t\treturn uni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.id = e.id;\r\n\t\t\tthis.$H.get('/video_read/'+this.id,{\r\n\t\t\t\ttoken:true,\r\n\t\t\t\tnoJump:true,\r\n\t\t\t\ttoast:false,\r\n\t\t\t}).then(result=>{\r\n\t\t\t\t//console.log(result);\r\n\t\t\t\tthis.hot = result.hot;\r\n\t\t\t\tthis.detail = result.video;\r\n\t\t\t\tthis.detail.created_time = $T.gettime(this.detail.created_time);\r\n\t\t\t\tthis.poster = this.detail.cover;\r\n\t\t\t\tthis.videos = result.video.video_details || [];\r\n\t\t\t\tthis.src = this.videos[this.activeIndex] ? this.videos[this.activeIndex].url : \"\";\r\n\t\t\t\tthis.followStatus = result.follow;\r\n\t\t\t\tthis.favaStatus = result.fava;\r\n\t\t\t\tthis.getComments();\r\n\t\t\t\tthis.getUserInfo();\r\n\t\t\t\tuni.$emit('video',{\r\n\t\t\t\t\tevent:\"init\",\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tvideos:this.videos,\r\n\t\t\t\t\t\tactiveIndex:this.activeIndex,\r\n\t\t\t\t\t\tposter:this.detail.cover,\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tvideoCTX = uni.createVideoContext('myVideo',this);\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tuser_id:state=>{\r\n\t\t\t\t\treturn state.user ? state.user.id : 0;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\n\t\tmethods: {\r\n\t\t\t//获取粉丝数\r\n\t\t\tgetUserInfo(){\n\t\t\t\tthis.$H.get('/user/user_info?user_id='+this.detail.user.id).then(res=>{\n\t\t\t\t\tthis.fensCount = res.fensCount\n\t\t\t\t})\n\t\t\t},\r\n\t\t\t//获取评论数据\r\n\t\t\tgetComments(){\r\n\t\t\t\tthis.$H.get('/video_comment/'+this.detail.id).then(res=>{\r\n\t\t\t\t\tthis.comments = res;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 提交评论内容\r\n\t\t\tsendComment(){\r\n\t\t\t\tif(this.content === ''){\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '评论内容不能为空',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.$H.post('/comment',{\r\n\t\t\t\t\tcontent:this.content,\r\n\t\t\t\t\tvideo_id:this.detail.id,\r\n\t\t\t\t\treply_id:this.reply_id,\r\n\t\t\t\t\treply_user_id:this.reply_user.id\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.getComments()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '评论成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.$refs.comment.hide()\r\n\t\t\t\t})\r\n\t\t\t},\n\t\t\t//切换选项卡\r\n\t\t\tchangeTab(index){\r\n\t\t\t\tthis.tabIndex = index;\r\n\t\t\t},\r\n\t\t\t//弹出选集\r\n\t\t\topenPopup(){\r\n\t\t\t\tthis.$refs.popup.show();\r\n\t\t\t},\r\n\t\t\thidePopup(){\r\n\t\t\t\tthis.$refs.popup.hide();\r\n\t\t\t},\r\n\t\t\tstop(){\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//+号弹出评论框\r\n\t\t\topenComment(reply_id=0,reply_user={\r\n\t\t\t\tid:0,\r\n\t\t\t\tusername:\"\",\r\n\t\t\t\tnickname:\"\",\r\n\t\t\t}){\r\n\t\t\t\tthis.reply_id = reply_id;\r\n\t\t\t\tthis.reply_user = {\r\n\t\t\t\t\tid:reply_user.id,\r\n\t\t\t\t\tname:reply_user.nickname || reply_user.username,\r\n\t\t\t\t};\r\n\t\t\t\tthis.content = \"\";\r\n\t\t\t\tthis.$refs.comment.show();\r\n\t\t\t},\r\n\t\t\t//关注/取消关注\r\n\t\t\tdoFollow(){\r\n\t\t\t\tlet url = this.followStatus ? '/user/unfollow':'/user/follow'\r\n\t\t\t\tlet msg = this.followStatus ? '取消关注':'关注'\r\n\t\t\t\tthis.$H.post(url,{\r\n\t\t\t\t\tfollow_id:this.detail.user.id\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.followStatus = !this.followStatus\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:msg+'成功'\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:msg+'失败'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//收藏/取消收藏\r\n\t\t\tdoFava(){\r\n\t\t\t\tthis.$H.post('/fava/video',{\r\n\t\t\t\t\tvideo_id:this.detail.id\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tthis.favaStatus = res.status;\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:res.msg\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//选集切换\r\n\t\t\tchangeVideo(item,index){\r\n\t\t\t\tvideoCTX.pause();\r\n\t\t\t\tthis.activeIndex = index;\r\n\t\t\t\tthis.src = item.url;\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tvideoCTX.play();\r\n\t\t\t\t},300)\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tuni.$emit('video',{\r\n\t\t\t\t\tevent:\"change\",\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tactiveIndex:this.activeIndex\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t//跳转个人空间\r\n\t\t\topenUserSpace(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'../user-space/user-space?user_id='+this.detail.user.id,\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t},\r\n\t\tfilters:{\r\n\t\t\tformatTime(value){\r\n\t\t\t\treturn $T.gettime(value);\r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}